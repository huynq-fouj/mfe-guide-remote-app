<div class="customer-container">
  <header class="page-header">
    <h2>Danh sách khách hàng</h2>
    <span class="badge-total">Tổng: {{ total }}</span>
  </header>

  <div class="table-wrapper">
    <table class="custom-table">
      <thead>
        <tr>
          <th style="width: 50px;">STT</th>
          <th>Mã KH</th>
          <th>Tên khách hàng</th>
          <th>Mã số thuế</th>
          <th>Ngày tạo</th>
          <th class="text-right">Nợ phải thu</th>
          <th class="text-right">Nợ phải trả</th>
        </tr>
      </thead>
      <tbody>
        @for (cus of customers; let i = $index; track cus.id;) {
          <tr (click)="viewDetail(cus)">
            <td>{{ i + 1 + params.page * params.size }}</td>
            <td><span class="code-highlight">{{ cus.code }}</span></td>
            <td>
              <div class="user-info">
                <span>{{ cus.name || cus.buyerName || '---' }}</span>
                <span *ngIf="cus.gender === 1" class="badge badge-male">Nam</span>
                <span *ngIf="cus.gender === 2" class="badge badge-female">Nữ</span>
              </div>
            </td>
            <td>{{ cus.taxCode || '---' }}</td>
            <td>{{ cus.createTime | date:'dd/MM/yyyy' }}</td>
            <td class="text-right money-receive">
              {{ cus.debtReceivable | currency:'VND':'symbol':'1.0-0' }}
            </td>
            <td class="text-right money-pay">
              {{ cus.debtPayable | currency:'VND':'symbol':'1.0-0' }}
            </td>
          </tr>
        }
        
        <tr *ngIf="!loading && customers.length === 0">
          <td colspan="7" class="text-center">Không có dữ liệu hiển thị</td>
        </tr>
        <tr *ngIf="loading && total === 0">
          <td colspan="7" class="text-center">Đang tải...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="pagination-controls">
    <div class="page-size-selector">
      <label>Hiển thị:</label>
      <select (change)="onSizeChange($event)">
        <option [value]="10">10</option>
        <option [value]="20">20</option>
        <option [value]="50">50</option>
      </select>
    </div>

    <div class="page-actions">
      <button 
        class="btn-page" 
        (click)="prevPage()" 
        [disabled]="params.page === 0 || loading">
        &laquo; Trước
      </button>

      <span class="page-info">
        Trang <strong>{{ params.page + 1 }}</strong> / {{ totalPages || 1 }}
      </span>

      <button 
        class="btn-page" 
        (click)="nextPage()" 
        [disabled]="params.page >= totalPages - 1 || loading">
        Sau &raquo;
      </button>
    </div>
  </div>
</div>